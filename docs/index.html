<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Identity Domains</title>
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="author" content="Asanka Herath">
    <meta name="description" content="A privacy boundary for the web within which the user’s identity is assumed to be shared.">
    <meta name="keywords" content="fingerprinting, identity domains">
    <link rel="stylesheet" href="stylesheets/normalize.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="stylesheets/cayman.css">
    <link rel="stylesheet" href="stylesheets/highlight.css">
    <script src="javascripts/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Identity Domains</h1>
      <h2 class="project-tagline">A privacy boundary for the web</h2>
      <a href="https://github.com/asankah/identity-domains" class="btn">View on GitHub</a>
      <a href="https://github.com/asankah/identity-domains/archive/master.zip" class="btn">Download .zip</a>
      <a href="https://github.com/asankah/identity-domains/archive/master.tar.gz" class="btn">Download .tar.gz</a>
    </section>
    <section class="main-content">
 
<h2 id="identity-domains">Identity Domains</h2>
<p><img src="images/identity-domains.png" alt="Diagram of example identity domains described below" /></p>
<p>Diagram showing relationships between clusters of documents and identity domains. <code>foo.example</code> and <code>baz.example</code> belong to the same first party set. <code>a.example</code> has no first-party relationship with any other domain.</p>
<p>For the sake of making it easier to write about things, can we come up with a name for the scope within which we consider it a given that the user has a shared or trivially joinable identity?</p>
<p>I’ve called it the “identity domain” in these diagrams, but feel free to bikeshed or point me at existing terminology for it.</p>
<p>The “Identity domain” has the following properties:</p>
<ul>
<li>
<p>All <a href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">active documents</a> in <a href="https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts">descendent browsing contexts</a> belong to the same <strong><em>identity domain</em></strong> as the active document in the <a href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>.</p>
<p><em>(See each cluster of browsing contexts in the diagram above)</em></p>
</li>
<li>
<p>All active documents in top-level browsing contexts that share the same <a href="https://html.spec.whatwg.org/multipage/webappapis.html#site">site</a> also share the same <strong><em>identity domain</em></strong>.</p>
<p><em>(In the diagram above, <code>foo.example</code> (cluster 1) and <code>baz.example</code> (cluster 2) belong to the same first-party set, hence they are considered to belong to the same identity domain. However a.example in cluster 3 does not belong to the same identity domain because there’s no first party relation between a.example and any other top level domain in the diagram.)</em></p>
</li>
<li>
<p>All <strong>private client state</strong> (open sockets, socket pools, cookies, storage, permissions / content settings, transient caches of credentials, cached resources, service workers) for all documents included in an identity domain also belong to the <strong><em>identity domain</em></strong>.</p>
</li>
<li>
<p><strong><em>Identity domains</em></strong> don’t span browser profiles.</p>
<p><em>(See clusters 1 and 4 in the diagram above. Both share top-level origins, but don’t share identity domains because they are in two different browser profiles.)</em></p>
</li>
<li>
<p><strong><em>Identity domains</em></strong> don’t span browsers.</p>
<p><em>(Derived from above).</em></p>
</li>
<li>
<p><strong><em>Identity domains</em></strong> don’t survive browsing data erasures. [^1]</p>
<p><em>(“Clear browsing data” effectively ends all identity domains.)</em></p>
</li>
</ul>
<!-- Footnotes themselves at the bottom. -->
<h2 id="notes">Notes</h2>
<ul>
<li>
<p>The identity domain is a privacy boundary. The boundary is something that’s asserted by the UA and doesn’t depend on the cooperation of sites. I.e. assume that sites involved are worst case actors.</p>
<ul>
<li>
Not to be confused with security boundaries like those imposed via <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">Content Security Policy</a>.
</li>
</ul>
</li>
<li>
<p>The definition assume that sites can share information out-of-band. I.e the boundary should be assertable even if sites collude.</p>
<ul>
<li>
The same site can appear in multiple identity domains. For example, re-identification is equivalent to a single site joining an identity across disjoint domains.
</li>
</ul>
</li>
<li>
<p>Two identity domains can be linked externally by sharing a unique identifier between the two domains.</p>
<ul>
<li>
<p>WRT federated identity (as detailed in <a href="https://github.com/samuelgoto/WebID">WebID</a>) multiple relying parties join identity domains by virtue of shared unique identifiers like email address. Similarly identity providers can also generate and use unique identifiers linking domains.</p>
</li>
<li>
<p>Using the same email address in multiple identity domains can effectively join the domains. More examples exist, but you get the idea.</p>
</li>
<li>
<p>We likely need another term for describing externally joined identity domains. In these cases the UA doesn’t necessarily know or can prevent joined identity domains.</p>
</li>
</ul>
</li>
<li>
<p>Concepts like “logging out” can be defined in terms of destroying an identity domain on the User Agent.</p>
</li>
<li>
<p>Destroying an identity domain must necessarily remove all associated local storage, both transient and persisted. This requires a clear demarcation of which constructs “belong” to which identity domain.</p>
</li>
</ul>

    </section>

  </body>
</html>
